<article class="poll-card">
  <div class="poll-card__header">
    <div class="poll-card__tags">
      <span class="poll-card__tag" [class]="statusClass()">{{ statusLabel() }}</span>
      <span class="poll-card__tag poll-card__tag--type">
        <i class="bi bi-bar-chart"></i> Encuesta
      </span>
      @if (poll().isAnonymous) {
        <span class="poll-card__tag poll-card__tag--dark">
          <i class="bi bi-incognito"></i> Anónima
        </span>
      }
      @if (poll().allowMultiple) {
        <span class="poll-card__tag poll-card__tag--subtle">Multi-opción</span>
      }
    </div>
    <span class="poll-card__date">
      <i class="bi bi-clock"></i> {{ poll().createdAt | date:'dd/MM/yy' }}
    </span>
  </div>

  <h3 class="poll-card__title">{{ poll().title }}</h3>

  @if (poll().description) {
    <p class="poll-card__desc">
      {{ poll().description | slice:0:100 }}{{ (poll().description?.length || 0) > 100 ? '...' : '' }}
    </p>
  }

  <!-- Vote Summary -->
  <div class="poll-card__stats">
    <span class="poll-card__stat">
      <i class="bi bi-people"></i> {{ poll().totalVotes || 0 }} votos
    </span>
    <span class="poll-card__stat">
      <i class="bi bi-list-ul"></i> {{ poll().options?.length || 0 }} opciones
    </span>
  </div>

  <div class="poll-card__footer">
    <button class="poll-card__results-btn" (click)="onViewResults()" type="button">
      <i class="bi bi-bar-chart"></i> Resultados
    </button>
    <div class="poll-card__actions">
      @if (canActivate()) {
        <button class="poll-card__action poll-card__action--success" (click)="onActivate()" type="button">
          <i class="bi bi-play-fill"></i> Activar
        </button>
      }
      @if (canClose()) {
        <button class="poll-card__action poll-card__action--danger" (click)="onClose()" type="button">
          <i class="bi bi-stop-fill"></i> Cerrar
        </button>
      }
    </div>
  </div>
</article>
