<div class="bulk-unit-page">
  <!-- Header -->
  <header class="bulk-unit-page__header">
    <div class="bulk-unit-page__header-content">
      <div class="bulk-unit-page__icon-container">
        <i class="bi bi-buildings"></i>
      </div>
      <h1 class="bulk-unit-page__title">Generación Masiva</h1>
      <p class="bulk-unit-page__subtitle">Crea múltiples unidades de forma rápida</p>
    </div>
  </header>

  <!-- Content -->
  <div class="bulk-unit-page__content">
    <!-- Loading Config -->
    @if (isLoadingConfig()) {
      <div class="bulk-unit-page__loading">
        <div class="bulk-unit-page__spinner"></div>
        <p>Cargando configuración...</p>
      </div>
    }

    <!-- General Error -->
    @if (generalError()) {
      <div class="bulk-unit-page__error" role="alert">
        <i class="bi bi-exclamation-triangle"></i>
        {{ generalError() }}
      </div>
    }

    <!-- Form / Result -->
    @if (!isLoadingConfig()) {
      @if (distributionResult()) {
        <app-distribution-result
          [result]="distributionResult()!"
          (createMore)="handleCreateMore()" />
      } @else {
        <div class="bulk-unit-page__config-badge">
          <i class="bi bi-info-circle"></i>
          Máximo permitido: <strong>{{ maxUnitsAllowed() }}</strong> unidades por lote
        </div>

        <app-bulk-unit-form
          [isSubmitting]="isSubmitting()"
          [maxAllowed]="maxUnitsAllowed()"
          (formSubmit)="handleSubmit($event)"
          (formCancel)="handleCancel()" />
      }
    }
  </div>

  <!-- Bottom Navigation -->
  <app-admin-bottom-nav [activeTab]="'units'" />
</div>
